"use strict";(self.webpackChunkstory=self.webpackChunkstory||[]).push([[762],{3905:(e,t,n)=>{n.d(t,{Zo:()=>b,kt:()=>h});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},b=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,c=e.parentName,b=s(e,["components","mdxType","originalType","parentName"]),u=l(n),m=i,h=u["".concat(c,".").concat(m)]||u[m]||p[m]||a;return n?r.createElement(h,o(o({ref:t},b),{},{components:n})):r.createElement(h,o({ref:t},b))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:i,o[1]=s;for(var l=2;l<a;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9799:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var r=n(7462),i=(n(7294),n(3905));const a={title:"Introduction Observation state management solution",date:"2019-05-09",authors:["anhhtus"],category:"React",tags:["React","State management","Observation state"],description:"New approach for state management using observer pattern"},o=void 0,s={permalink:"/blog/Introduction Observation State solution",source:"@site/blog/Introduction Observation State solution/index.md",title:"Introduction Observation state management solution",description:"New approach for state management using observer pattern",date:"2019-05-09T00:00:00.000Z",formattedDate:"May 9, 2019",tags:[{label:"React",permalink:"/blog/tags/react"},{label:"State management",permalink:"/blog/tags/state-management"},{label:"Observation state",permalink:"/blog/tags/observation-state"}],readingTime:3.155,hasTruncateMarker:!1,authors:[{name:"V\u0169 Anh T\xfa",title:"Share to be shared",url:"https://github.com/vuanhtu1993",imageURL:"https://avatars.githubusercontent.com/u/29482564?v=4",key:"anhhtus"}],frontMatter:{title:"Introduction Observation state management solution",date:"2019-05-09",authors:["anhhtus"],category:"React",tags:["React","State management","Observation state"],description:"New approach for state management using observer pattern"},prevItem:{title:"Understanding refs in React system",permalink:"/blog/Ref in react"},nextItem:{title:"3 b\u01b0\u1edbc t\u1ea1o m\u1edbi d\u1ef1 \xe1n React b\u1eb1ng webpack",permalink:"/blog/How to create React app"}},c={authorsImageUrls:[void 0]},l=[{value:"Introduction Observation state management solution:",id:"introduction-observation-state-management-solution",level:3},{value:"Observer Pattern:",id:"observer-pattern",level:4},{value:"Singleton Pattern",id:"singleton-pattern",level:4}],b={toc:l},u="wrapper";function p(e){let{components:t,...a}=e;return(0,i.kt)(u,(0,r.Z)({},b,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",{id:"introduction-observation-state-management-solution"},"Introduction Observation state management solution:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"L\u1ea5y c\u1ea3m h\u1ee9ng t\u1eeb \xfd t\u01b0\u1edfng ",(0,i.kt)("inlineCode",{parentName:"li"},"Observer pattern")," c\xf9ng vi\u1ec7c h\u1ecdc h\u1ecfi theo m\u1ed9t trainer(FOZG) c\u1ee7a m\xecnh t\u1ea1i FPT\n\u0111\xe3 vi\u1ebft m\u1ed9t c\xf4ng c\u1ee5 c\xf3 th\u1ec3 l\xe0m vi\u1ec7c nh\u01b0 l\xe0 m\u1ed9t th\u01b0 vi\u1ec7n qu\u1ea3n l\xed tr\u1ea1ng th\xe1i."),(0,i.kt)("li",{parentName:"ul"},"Trong d\u1ef1 \xe1n t\xf4i s\u1eed d\u1ee5ng 2 pattern ch\xednh l\xe0 ",(0,i.kt)("inlineCode",{parentName:"li"},"Observer Pattern")," v\xe0 ",(0,i.kt)("inlineCode",{parentName:"li"},"Singleton Pattern"),", trong m\u1ed9t b\xe0i vi\u1ebft kh\xe1c\nm\xecnh s\u1ebd \u0111\u1ec1 c\u1ea5p \u0111\u1ebfn m\u1ed9t s\u1ed1 pattern \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng r\u1ea5t nhi\u1ec1u trong c\xe1c d\u1ef1 \xe1n Javascript")),(0,i.kt)("h4",{id:"observer-pattern"},"Observer Pattern:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"alt text",src:n(5539).Z,width:"825",height:"341"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Nh\u01b0 \u0111\u01b0\u1ee3c bi\u1ec3u di\u1ec5n trong s\u01a1 \u0111\u1ed3 UML, c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng c\u1ea7n thi\u1ebft l\xe0 subject, observer v\xe0 c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng c\u1ee5 th\u1ec3.\nSubject c\xf3 ch\u1ee9a tham chi\u1ebfu \u0111\u1ebfn c\xe1c observers c\u1ee5 th\u1ec3 \u0111\u1ec3 th\xf4ng b\xe1o cho b\u1ea5t k\u1ef3 thay \u0111\u1ed5i.\n\u0110\u1ed1i t\u01b0\u1ee3ng Observer l\xe0 m\u1ed9t l\u1edbp tr\u1eebu t\u01b0\u1ee3ng cho ph\xe9p c\xe1c observers c\u1ee5 th\u1ec3 th\u1ef1c hi\u1ec7n ph\u01b0\u01a1ng th\u1ee9c th\xf4ng b\xe1o")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'let Subject = function() {\n  // M\u1ed9t stack c\xe1c observers subscribe Subject\n  this.observers = [];\n\n  return {\n    subscribeObserver: function(observer) {\n      this.observers.push(observer);\n    },\n    unsubscribeObserver: function(observer) {\n      let index = this.observers.indexOf(observer);\n      if(index > -1) {\n        this.observers.splice(index, 1);\n      }\n    },\n    notifyObserver: function(observer) {\n      let index = this.observers.indexOf(observer);\n      if(index > -1) {\n        this.observers[index].notify(index);\n      }\n    },\n    notifyAllObservers: function() {\n      for(let i = 0; i < this.observers.length; i++){\n        this.observers[i].notify(i);\n      };\n    }\n  };\n};\n\nlet Observer = function() {\n  return {\n    notify: function(index) {\n      console.log("Observer " + index + " is notified!");\n    }\n  }\n}\n\nlet subject = new Subject();\n\nlet observer1 = new Observer();\nlet observer2 = new Observer();\nlet observer3 = new Observer();\nlet observer4 = new Observer();\n\nsubject.subscribeObserver(observer1);\nsubject.subscribeObserver(observer2);\nsubject.subscribeObserver(observer3);\nsubject.subscribeObserver(observer4);\n\nsubject.notifyObserver(observer2); // Observer 2 is notified!\n\nsubject.notifyAllObservers();\n// Observer 1 is notified!\n// Observer 2 is notified!\n// Observer 3 is notified!\n// Observer 4 is notified!\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"T\u01b0 t\u01b0\u1edfng ch\xednh: ta x\xe2y d\u1ef1ng m\u1ed9t n\u01a1i qu\u1ea3n l\xed state t\u1eadp trung c\u1ee7a c\u1ea3 d\u1ef1 \xe1n g\u1ecdi l\xe0 ",(0,i.kt)("inlineCode",{parentName:"p"},"Store"),",\nt\u1ea1i \u0111\xe2y d\u1ef1 li\u1ec7u s\u1ebd \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt => b\xe1o cho c\xe1c ",(0,i.kt)("inlineCode",{parentName:"p"},"component")," ",(0,i.kt)("inlineCode",{parentName:"p"},"subscribe")," ",(0,i.kt)("inlineCode",{parentName:"p"},"Store")," bi\u1ebft l\xe0 \u0111\xe3 c\xf3 s\u1ef1 thay \u0111\u1ed5i\nstore v\xe0 h\xe3y render l\u1ea1i \u0111i (\u0111\xe3 c\xf3 d\u1eef li\u1ec7u m\u1edbi r\u1ed3i)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Implement th\u1ebf n\xe0o?\nT\u1eeb \xfd t\u01b0\u1edfng v\xe0 khi implement l\xe0 c\u1ea3 m\xf4t s\u1ef1 kh\xe1c bi\u1ebft r\u1ea5t l\u1edbn:"))),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u0110\u1ea7u ti\xean l\xe0 v\u1ea5n \u0111\u1ec1 ",(0,i.kt)("inlineCode",{parentName:"p"},"Store")," (\u1ede \u0111\xe2y l\xe0 \u1ee9ng v\u1edbi Subject): N\u01a1i l\u01b0u tr\u1eef d\u1eef li\u1ec7u, subscribe component v\xe0 update d\u1eef li\u1ec7u\nNh\u01b0ng m\xe0 v\u1ea5n \u0111\u1ec1 \u1edf ch\u1ed7 l\xe0 kh\xf4ng th\u1ec3 c\u1ee9 component n\xe0o c\u0169ng t\u1ea1o ra m\u1ed9t Store \u0111\u01b0\u1ee3c v\xec nh\u01b0 th\u1ebf c\xf2n g\xec l\xe0\nqu\u1ea3n l\xed t\u1eadp trung n\u1eefa. \u0110i\u1ec1u n\xe0y l\xe0m ta ph\u1ea3i ngh\u0129 ngay \u0111\u1ebfn Singleton Pattern :))))\nKh\xf3 c\xe0ng th\xeam kh\xf3 => L\u1ea1i th\xeam m\u1ed9t pattern n\u1eefa m\xecnh b\u0103n kho\u0103n (Xem \u0111\u1ecbnh ngh\u0129a \u1edf d\u01b0\u1edbi nh\xe9)\nC\xf3 th\u1ec3 hi\u1ec3u l\xe0 m\xecnh c\u1ea7n ph\u1ea3i t\u1ea1o m\u1ed9t object (\u0111\xf3ng vai tr\xf2 nh\u01b0 l\xe0 Singleton), t\u1ea1o m\u1ed9t l\u1ea7n\nd\xf9ng m\xe3i m\xe3i :))))\nT\u1ea1m th\u1eddi t\u1eafc t\u1ecbt \u1edf \u0111\xe2y !!!")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"B\xe2y l\xe0 v\u1ea5n \u0111\u1ec1 Observer: C\xe1i g\xec l\xe0 \u0111\xf3ng vai tr\xf2 th\xf4ng b\xe1o cho component bi\u1ebft khi n\xe0o c\u1ea7n ph\u1ea3i render\nl\u1ea1i ???. C\xe2u tr\u1ea3 l\u1eddi l\xe0: h\xe0m setState c\u1ee7a HOC ch\u1ee9a component => V\xec khi h\xe0m setState n\xe0y \u0111\u01b0\u1ee3c\ntrigger th\xec component subscribe (HOC) s\u1ebd \u0111\u01b0\u1ee3c render l\u1ea1i => Component ch\xednh \u0111\u01b0\u1ee3c render l\u1ea1i\n")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Ngon r\u1ed3i, \u0111\xe3 clear h\u01a1n m\u1ed9t ch\xfat v\u1ec1 ph\u1ea7n subscribe v\xe0 render l\u1ea1i => Tuy nhi\xean v\u1ea5n \u0111\u1ec1 1\nth\xec c\xf2n nan gi\u1ea3i. V\u1eady l\xe0 c\u1ea7n ph\u1ea3i t\u1ea1o m\u1ed9t ",(0,i.kt)("inlineCode",{parentName:"p"},"instance")," c\u1ee7a ",(0,i.kt)("inlineCode",{parentName:"p"},"Store")," t\u1ed5ng \u0111\u1ec3 import v\xe0o HOC => M\u1ed9t c\xe1ch\n\u0111\u1ec3 t\u1ea1o ra Singleton."))),(0,i.kt)("p",null,"Nh\u01b0ng m\xecnh \u0111ang c\u1ea7n ph\u1ea3i t\u1ea1o ra nhi\u1ec1u Store \u0111\u1ec3 ph\u1ee5c v\u1ee5 c\xe1c \u1ee9ng d\u1ef1ng r\u1ec9\xeang => Gi\u1ed1ng redux n\xean thay v\xec t\u1ea1o\nsingleton l\xe0 Store ta s\u1ebd t\u1ea1o ",(0,i.kt)("inlineCode",{parentName:"p"},"singleton")," l\xe0 c\xe1c Observation ch\u1ee9 h\xe0m connect HOC v\u1edbi component "),(0,i.kt)("p",null,"Chi ti\u1ebft code xem t\u1ea1i \u0111\xe2y: ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/vuanhtu1993/observation-state"},"https://github.com/vuanhtu1993/observation-state")),(0,i.kt)("h4",{id:"singleton-pattern"},"Singleton Pattern"))}p.isMDXComponent=!0},5539:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/observation-pattern-1a7147819ba7bb06af4eb491de554b29.png"}}]);