"use strict";(self.webpackChunkstory=self.webpackChunkstory||[]).push([[5122],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),l=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=l(e.components);return a.createElement(i.Provider,{value:t},e.children)},p="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=l(n),m=r,d=p["".concat(i,".").concat(m)]||p[m]||f[m]||o;return n?a.createElement(d,s(s({ref:t},u),{},{components:n})):a.createElement(d,s({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=m;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c[p]="string"==typeof e?e:r,s[1]=c;for(var l=2;l<o;l++)s[l]=n[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},521:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>f,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var a=n(7462),r=(n(7294),n(3905));const o={title:"Understanding refs in React system",date:"2019-05-23",category:"React",authors:["anhhtus"],tags:["React","Refs","Forward refs"],description:"How to use refs into React app, advantage of refs"},s=void 0,c={permalink:"/blog/Ref in react",source:"@site/blog/Ref in react/index.md",title:"Understanding refs in React system",description:"How to use refs into React app, advantage of refs",date:"2019-05-23T00:00:00.000Z",formattedDate:"May 23, 2019",tags:[{label:"React",permalink:"/blog/tags/react"},{label:"Refs",permalink:"/blog/tags/refs"},{label:"Forward refs",permalink:"/blog/tags/forward-refs"}],readingTime:3.91,hasTruncateMarker:!1,authors:[{name:"V\u0169 Anh T\xfa",title:"Share to be shared",url:"https://github.com/vuanhtu1993",imageURL:"https://avatars.githubusercontent.com/u/29482564?v=4",key:"anhhtus"}],frontMatter:{title:"Understanding refs in React system",date:"2019-05-23",category:"React",authors:["anhhtus"],tags:["React","Refs","Forward refs"],description:"How to use refs into React app, advantage of refs"},prevItem:{title:"L\xe0m sao \u0111\u1ec3 customize HTML Element trong React",permalink:"/blog/Create custom component in React"},nextItem:{title:"Introduction Observation state management solution",permalink:"/blog/Introduction Observation State solution"}},i={authorsImageUrls:[void 0]},l=[{value:"Refs l\xe0 g\xec:",id:"refs-l\xe0-g\xec",level:3},{value:"b. Refs for class component",id:"b-refs-for-class-component",level:5}],u={toc:l},p="wrapper";function f(e){let{components:t,...o}=e;return(0,r.kt)(p,(0,a.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h3",{id:"refs-l\xe0-g\xec"},"Refs l\xe0 g\xec:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Theo react official: React supports a special attribute that you can attach to any component (DOM node and component).\nThe ref attribute can be an object created by React.createRef() function or a callback function, or a string (in legacy API).\nWhen the ref attribute is a callback function, the function receives the underlying DOM element or class instance (depending on the type of element) as its argument.\nThis allows you to have direct access to the DOM element or component instance.\nUse refs sparingly. If you find yourself often using refs to \u201cmake things happen\u201d in your app, consider getting more familiar with top-down data flow."),(0,r.kt)("li",{parentName:"ul"},"Refs l\xe0 m\u1ed9t thu\u1ed9c t\xednh \u0111\u1eb7c bi\u1ec7t c\xf3 th\u1ec3 attach v\xe0o b\u1ea5t k\u1ec3 m\u1ed9t component n\xe0o (DOM node and component), thu\u1ed9c t\xednh ref c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c t\u1ea1o ra\nb\u1eb1ng React.createRef(), ho\u1eb7c d\xf9ng function (node) => refName = node, ho\u1eb7c \u0111\u01a1n gi\u1ea3n l\xe0 string",(0,r.kt)("h4",{parentName:"li",id:"1-string-refs-l\xe0-c\xe1ch-c\u0169-nh\u1ea5t-\u0111\u1ec3-t\u1ea1o-ra-m\u1ed9t-refs-v\xe0-s\u1ebd-b\u1ecb-lo\u1ea1i-b\u1ecf-trong-t\u01b0\u01a1ng-lai"},"1. String refs: L\xe0 c\xe1ch c\u0169 nh\u1ea5t \u0111\u1ec3 t\u1ea1o ra m\u1ed9t refs v\xe0 s\u1ebd b\u1ecb lo\u1ea1i b\u1ecf trong t\u01b0\u01a1ng lai"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// String\nexport default class index extends React.Component {\n  constructor() {\n    super();\n    this.state = {sayings: "" };\n  }\n  update(e) {\n    this.setState({sayings: this.refs.input.value});\n  }\n\n  render() {\n    return (\n      <div>\n        Bob says <input type="text" ref="btalks" onChange={this.update.bind(this)} />\n        {this.state.sayings}\n      </div>\n    );\n  }\n}\n')),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"If you\u2019re currently using this.refs.textInput to access refs,\nwe recommend using either the callback pattern or the createRef API instead.")),(0,r.kt)("h4",{parentName:"li",id:"2-callback-refs"},"2. Callback refs"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'class MyComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { uppercase: false };\n  }\n  \n  toggleInputCase = () => {\n    const isUpper = this.state.uppercase;\n    // Accessing the ref using this.inputField\n    const value = this.inputField.value;\n    this.inputField.value =\n      isUpper\n        ? value.toLowerCase()\n        : value.toUpperCase();\n    this.setState({ uppercase: !isUpper });\n  }\n  render() {\n    return (\n      <div>\n        {/* Creating a callback ref and storing it in this.inputField */}\n        <input type="text" ref={elem => this.inputField = elem} />\n        <button type="button" onClick={this.toggleInputCase}>\n          Toggle Case\n        </button>\n      </div>\n    );\n  }\n  \n}\n')),(0,r.kt)("h4",{parentName:"li",id:"3-using-reactcreateref"},"3. Using React.createRef()"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"class MyComponent extends React.Component {\n constructor(props) {\n   super(props);\n   this.myRef = React.createRef();\n }\n render() {\n   return <div ref={this.myRef} />;\n }\n}\n")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},' \n \n #### 4. Some technical of Refs\n ##### a. Forward refs: \n * L\xe0 k\u0129 thu\u1eadt t\u1ef1 \u0111\u1ed9ng truy\u1ec1n ref qua m\u1ed9t component => \u0111\u1ebfn m\u1ed9t trong c\xe1c component con c\u1ee7a n\xf3\n ```javascript\nfunction FancyButton(props) {\n  return (\n    <button className="FancyButton" {...props}>\n      {props.children}\n    </button>\n  );\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"X\xe9t vd tr\xean: \u0111\xe2y l\xe0 c\xe1c th\xf4ng th\u01b0\u1eddng \u0111\u1ec3 t\u1ea1o m\u1ed9t custom component t\u1eeb element, c\xf3 th\u1ec3 l\u1ea5y \u0111\u01b0\u1ee3c h\u1ebft c\xe1c props t\u1eeb cha\n\u0111\u1ebfn th\u1eb1ng input n\u1eb1m b\xean trong, tuy nhi\xean nh\u1eefng API nh\u01b0 focus(), blur(), click(), select(), setSelectionRange(), setRangeText()\nsetCustomValidity(), checkValidity(), reportValidity()\nth\xec forward ref s\u1ebd gi\u1ea3i quy\u1ebft \u0111c v\u1ea5n \u0111\u1ec1 n\xe0y:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'import React from \'react\'\n\nconst InputRef = React.forwardRef((props, ref) => (\n    <>\n      <input placeholder="custom ref input" ref={ref} {...props}/>\n    </>\n  ))\n\nexport default InputRef\n\n// Using\nfunction App() {\n  let customRefInput = React.createRef();\n  const [inputValue, setInputValue] = useState("");\n  return (\n    <div className="App">\n      <h1>Hello React 17</h1>\n      <h2>Start learing REF react</h2>\n      <div>Custom input component</div>\n      <Input value={inputValue} onChange={e => setInputValue(e.target.value)} />\n      <div>Custom input component using forward ref</div>\n      <InputRef ref={node => (customRefInput = node)} />\n      <div>\n        {/*Click button to focus ref input */}\n        <button onClick={() => customRefInput.focus()}>Focus</button>\n      </div>\n    </div>\n  );\n}\n')),(0,r.kt)("h5",{id:"b-refs-for-class-component"},"b. Refs for class component"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"M\u1ed7i class component (function component kh\xf4ng c\xf3) c\u0169ng c\xf3 thu\u1ed9c t\xednh ref, ref tr\u1ecf \u0111\u1ebfn \u0111\u1ed1i t\u01b0\u1ee3ng (instance)\n\u0111\u01b0\u1ee3c t\u1ea1o ra t\u1eeb class component\nT\u1eeb \u0111\xe2y c\xf3 th\u1ec3 access v\xe0o c\xe1c method c\xf3 s\u1eb5n c\u1ee7a component \u0111\u01b0\u1ee3c g\xe1n ref c\u0169ng nh\u01b0 c\xe1c method t\u1ef1 \u0111\u1ecbnh ngh\u0129a, v\xed d\u1ef1 trong\nt\xecnh hu\u1ed1ng n\xe0y l\xe0 method ",(0,r.kt)("inlineCode",{parentName:"li"},"showLog"),(0,r.kt)("img",{src:n(3836).Z,width:"623",height:"383"}))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'\nexport default class InputClass extends React.Component {\n  showLog = () => {\n    console.log("show log");\n  };\n  render() {\n    return (\n      <>\n        <input placeholder="class input" />\n      </>\n    );\n  }\n}\n\n\nfunction App() {\n  let customRefInput = React.createRef();\n  let customInput = React.createRef();\n  const [inputValue, setInputValue] = useState("");\n  return (\n    <div className="App">\n      <h1>Hello React 17</h1>\n      <h2>Start learing REF react</h2>\n      <Input\n        value={inputValue}\n        onChange={e => setInputValue(e.target.value)}\n        // Kh\xf4ng \u0111\u01b0\u1ee3c show lo\n        ref={node => console.log("input 1", node)}\n      />\n      <InputRef ref={node => console.log("input 2", node)} />\n      <InputClass ref={node => console.log("input 3", node)}/>\n    </div>\n  );\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"V\xe0 \u0111\xe2y l\xe0 implememt")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'function App() {\n  let customRefInput = React.createRef();\n  let classInput = React.createRef();\n  const [inputValue, setInputValue] = useState("");\n  return (\n    <div className="App">\n      <h1>Hello React 17</h1>\n      <h2>Start learing REF react</h2>\n      <Input\n        value={inputValue}\n        onChange={e => setInputValue(e.target.value)}\n        ref={node => console.log("input 1", node)}\n      />\n      <InputRef ref={node => (customRefInput = node)} />\n      <InputClass ref={node => (classInput = node)} />\n      <div>\n        <button onClick={() => customRefInput.focus()}>Focus</button>\n        <button onClick={() => customRefInput.blur()}>Blur</button>\n        <button onClick={() => classInput.setState({ test: "test" })}>\n          Reset state\n        </button>\n        <button onClick={() => classInput.setState({ test: "Change test" })}>\n          Set state\n        </button>\n      </div>\n    </div>\n  );\n}\n')))}f.isMDXComponent=!0},3836:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/SS_ref2-6af4262f0500516eea08b61a6edbab81.png"}}]);